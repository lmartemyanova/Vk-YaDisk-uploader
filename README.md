## Резервное копирование

#### ***Программа предназначена для резервного копирования фото из профиля Вконтакте (аватарок) на Яндекс Диск.***

### Установка:
1. Клонировать репозиторий.
2. Установить зависимости из requrements.txt: 
```
pip install -r requirements.txt
```
3. Получить [ключ доступа к API Вк](https://dev.vk.com/api/access-token/implicit-flow-user) (access_token) для Standalone-приложения. В параметрах запроса передать scope=photos.
4. Получить [токен с полигона Яндекс Диска](https://yandex.ru/dev/disk/poligon/) (ya_token).
5. Переименовать файл ".env.example" в ".env", записать в него токены:
```
access_token=533bacf01e11f55b536a565b57531ad114461ae8736d6506a3  # Ваш токен вк (без кавычек)
ya_token=0c4181a7c2cf4521964a72ff57a34a07  # Ваш токен с Полигона Яндекс диска (без кавычек)
```
6. Запустить код в IDE или выполнить в терминале:
```
python main.py
```

### Формат получаемых данных:
##### Выгрузка фото из ВК на Яндекс диск
1. Получение фотографий с профиля: необходимо ввести id профиля ВК или короткое имя пользователя (screen name), для которого необходимо выполнить резервное копирование, и id альбома (цифры в адресной строке после знака _).
2. Сохранение фотографий на Я.Диске: необходимо ввести количество сохраняемых фотографий (по умолчанию будут сохранены все фото).
3. Фото сохраняются в папку с наименованием "vk_copy_дата копирования".
4. Фото сохраняются с именем, соответствующим дате загрузки, если дата одинакова, добавляется число по порядку через _: "20.01.2015_1"".
5. При ошибке загрузки фото (одного или нескольких) названия не загруженных фото выводятся в отдельном окне.
6. Дополнительно загружается json-файл с информацией о загруженных фотографиях.

##### Выгрузка фото в ВК с локального компьютера
1. Необходимо ввести адрес папки, из которой будут выложены фото (абсолютный путь).
2. Ввести id профиля ВК или короткое имя пользователя (screen name).
3. Ввести id альбома (цифры в адресной строке после знака _).

##### Дополнительные функции Яндекс диска
При выгрузке фото в ВК необходимо придерживаться формата jpg / png / img, однако наш любимый айфон часто сохраняет фото в формате .heic (лайф-фото). Чтобы не конвертировать каждую фотографию вручную, есть следующая фича:
В модуле yandex есть файл ya_disk-format.py. Необходимо запустить его в редакторе или терминале:
```
python ya_disk-format.py
```
Далее нужно ввести название альбома на Яндекс диске (не ссылку, просто название). Не забудьте вписать токен Яндекс диска в файл .env! 
Фото будут сконвертированы автоматически и их копии дополнительно сохранятся в формате jpg или png (вам будет предложен выбор).

### Предполагаемые модификации:
- Скачивание фото с любого из альбомов пользователя на выбор.
- Скачивание фото на Яндекс диск, Гугл диск или локальный компьютер (по выбору пользователя).
- Обратная выгрузка фото в Вк с Яндекс или Гугл диска (пользователь вводит путь к файлам).
- Сохранение по умолчанию всех фото с введенного альбома.
- Доступ ко всем возможностям через чат-бота вконтакте.
